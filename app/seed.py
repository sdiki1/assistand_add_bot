from __future__ import annotations

from pathlib import Path

from sqlalchemy import delete, func, select
from sqlalchemy.ext.asyncio import AsyncSession

from app.config import settings
from app.models import Option, Question, Response, Survey


def _build_option_payload(opt: object, default_order: int) -> dict[str, object]:
    if isinstance(opt, dict):
        text = str(opt.get("text", "")).strip()
        value = str(opt.get("value", text)).strip()
        order = int(opt.get("order", default_order))
        return {"text": text, "value": value, "order": order}
    text = str(opt)
    return {"text": text, "value": text, "order": default_order}


async def _seed_survey(
    session: AsyncSession,
    *,
    code: str,
    title: str,
    questions_data: list[dict[str, object]],
) -> None:
    survey = await session.scalar(select(Survey).where(Survey.code == code))
    if not survey:
        survey = Survey(code=code, title=title, is_active=True)
        session.add(survey)
        await session.flush()

    responses_count = await session.scalar(
        select(func.count(Response.id)).where(Response.survey_id == survey.id)
    )
    if responses_count and responses_count > 0:
        return

    question_ids = (
        await session.scalars(select(Question.id).where(Question.survey_id == survey.id))
    ).all()
    if question_ids:
        await session.execute(delete(Option).where(Option.question_id.in_(question_ids)))
        await session.execute(delete(Question).where(Question.id.in_(question_ids)))
        await session.commit()

    for item in questions_data:
        options = item.pop("options", [])
        question = Question(survey_id=survey.id, **item)
        if question.type == "multi_choice":
            question.allow_multiple = True
        session.add(question)
        await session.flush()
        for idx, opt in enumerate(options, start=1):
            payload = _build_option_payload(opt, idx)
            session.add(
                Option(
                    question_id=question.id,
                    text=payload["text"],
                    value=payload["value"],
                    order=payload["order"],
                )
            )

    await session.commit()


async def seed_if_empty(session: AsyncSession) -> None:
    main_questions = [
        {
            "code": "consent",
            "text": (
                "–°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:\n\n"
                "–ù–∞–∂–∏–º–∞—è –∫–Ω–æ–ø–∫—É ¬´–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å¬ª –∏ –∑–∞–ø–æ–ª–Ω—è—è –∞–Ω–∫–µ—Ç—É, —è –¥–∞—é —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –º–æ–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö: "
                "–§–ò–û, –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —Å–≤–µ–¥–µ–Ω–∏–π –æ–± –æ–ø—ã—Ç–µ —Ä–∞–±–æ—Ç—ã, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –Ω–∞–≤—ã–∫–∞—Ö –∏ –∏–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, "
                "—É–∫–∞–∑–∞–Ω–Ω–æ–π –º–Ω–æ–π –≤ –∞–Ω–∫–µ—Ç–µ –∏ —Ä–µ–∑—é–º–µ.\n"
                "–Ø –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –¥–æ–±—Ä–æ–≤–æ–ª—å–Ω–æ —Å —Ü–µ–ª—å—é –ø–æ–¥–±–æ—Ä–∞ –≤–∞–∫–∞–Ω—Å–∏–π –∏ –≤–æ–∑–º–æ–∂–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ "
                "–º–æ–µ–π –∞–Ω–∫–µ—Ç—ã –∏ —Ä–µ–∑—é–º–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è–º.\n"
                "–ú–Ω–µ –∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ —è –º–æ–≥—É –æ—Ç–æ–∑–≤–∞—Ç—å —Å–≤–æ—ë —Å–æ–≥–ª–∞—Å–∏–µ, –Ω–∞–ø–∏—Å–∞–≤ –ø–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ –ø–æ–ª–∏—Ç–∏–∫–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏."
            ),
            "type": "single_choice",
            "order": 0,
            "options": ["–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"],
        },
        {
            "code": "fio",
            "text": "–ò–º—è",
            "type": "text",
            "order": 1,
            "help_text": "–§–æ—Ä–º–∞—Ç: –ò–º—è",
        },
        {
            "code": "contact",
            "text": "–ö–æ–Ω—Ç–∞–∫—Ç—ã",
            "type": "contact",
            "order": 2,
            "help_text": "–§–æ—Ä–º–∞—Ç: –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–æ—Ü.—Å–µ—Ç—å / –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞",
        },
        {
            "code": "tasks",
            "text": "–ö–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ —Ö–æ—á–µ—à—å (–∏ —É–º–µ–µ—à—å) –¥–µ–ª–∞—Ç—å? ‚û°Ô∏è",
            "type": "multi_choice",
            "order": 3,
            "options": [
                "–í–µ–¥–µ–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è, –≤—Å—Ç—Ä–µ—á, –ø–µ—Ä–µ–ª—ë—Ç–æ–≤",
                "–ö–æ–Ω—Ç—Ä–æ–ª—å –∑–∞–¥–∞—á —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è",
                "–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å –ø–æ–¥—Ä—è–¥—á–∏–∫–∞–º–∏",
                "–ü–æ–∏—Å–∫ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π",
                "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ / –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π",
                "–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π / –ø–æ–µ–∑–¥–æ–∫",
                "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å / –æ—Ç—á—ë—Ç—ã / —Ç–∞–±–ª–∏—Ü—ã",
                "–í–µ–¥–µ–Ω–∏–µ –ª–∏—á–Ω—ã—Ö –¥–µ–ª —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è",
                "–õ–∏—á–Ω—ã–µ –ø–æ—Ä—É—á–µ–Ω–∏—è (–ø–æ–¥–∞—Ä–∫–∏, —Ö–∏–º—á–∏—Å—Ç–∫–∏, –∑–∞–ø–∏—Å–∏ –∫ –≤—Ä–∞—á–∞–º –∏ —Ç–¥)",
                "–ü–æ–ª–Ω—ã–π day-to-day –±—ã—Ç —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è",
                "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π SMM / –ø–æ—Å—Ç–∏–Ω–≥",
            ],
        },
        {
            "code": "work_format",
            "text": "–ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ä–∞–±–æ—Ç—ã ‚û°Ô∏è",
            "type": "multi_choice",
            "order": 4,
            "options": ["–£–¥–∞–ª—ë–Ω–Ω–æ", "–ì–∏–±—Ä–∏–¥", "–¢–æ–ª—å–∫–æ –æ—Ñ–∏—Å"],
        },
        {
            "code": "conditions_schedule",
            "text": "–£–¥–æ–±–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –∏ –≥—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã ‚û°Ô∏è",
            "type": "multi_choice",
            "order": 5,
            "options": [
                "–ì–æ—Ç–æ–≤–∞ –∫ –ø–µ—Ä–µ–µ–∑–¥—É",
                "–ì–æ—Ç–æ–≤–∞ –∫ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∞–º",
                "–ü–æ–ª–Ω—ã–π –¥–µ–Ω—å",
                "–ß–∞—Å—Ç–∏—á–Ω–∞—è",
                "–ü—Ä–æ–µ–∫—Ç–Ω–∞—è",
                "–ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ",
            ],
        },
        {
            "code": "work_style",
            "text": "–ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ç–∏–ª—å —Ä–∞–±–æ—Ç—ã‚û°Ô∏è",
            "type": "multi_choice",
            "order": 6,
            "options": [
                "–ë—ã—Å—Ç—Ä—ã–π, –¥–∏–Ω–∞–º–∏—á–Ω—ã–π",
                "–°–ø–æ–∫–æ–π–Ω—ã–π, —Å–∏—Å—Ç–µ–º–Ω—ã–π",
                "–ß—ë—Ç–∫–∏–µ –∑–∞–¥–∞—á–∏ –∏ –¥–µ–¥–ª–∞–π–Ω—ã",
                "–£–≤–∞–∂–µ–Ω–∏–µ –∫ –ª–∏—á–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏",
                "–î–æ–≤–µ—Ä–∏–µ –∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ",
                "–ë–µ–∑ –º–∏–∫—Ä–æ–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞",
                "–û—Ç–∫—Ä—ã—Ç—ã–π –∫ –¥–∏–∞–ª–æ–≥—É",
            ],
        },
        {
            "code": "spheres",
            "text": "–í –∫–∞–∫–∏—Ö —Å—Ñ–µ—Ä–∞—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å?‚û°Ô∏è",
            "type": "multi_choice",
            "order": 7,
            "options": [
                "IT / —Å—Ç–∞—Ä—Ç–∞–ø—ã",
                "–û–Ω–ª–∞–π–Ω-–±–∏–∑–Ω–µ—Å / –∏–Ω—Ñ–æ–±–∏–∑–Ω–µ—Å",
                "E-commerce",
                "–ü—Ä–æ–¥–∞–∫—à–Ω / –º–µ–¥–∏–∞ / –±–ª–æ–≥–µ—Ä—ã",
                "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ / —Ñ–∏–Ω–∞–Ω—Å—ã",
                "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã",
                "–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏",
                "–ì–æ—Å—Å—Ç—Ä—É–∫—Ç—É—Ä—ã",
            ],
        },
        {
            "code": "salary",
            "text": "–¢–≤–æ–π –∂–µ–ª–∞–µ–º—ã–π –¥–æ—Ö–æ–¥?",
            "type": "single_choice",
            "order": 8,
            "help_text": (
                "–£–∫–∞–∂–∏ –∂–µ–ª–∞–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–æ—Ö–æ–¥–∞, –∏—Å—Ö–æ–¥—è –∏–∑ —Ç–≤–æ–µ–≥–æ –æ–ø—ã—Ç–∞, –Ω–∞–≤—ã–∫–æ–≤ –∏ —É—Ä–æ–≤–Ω—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, "
                "–∫–æ—Ç–æ—Ä—ã–π –≥–æ—Ç–æ–≤—ã –±—Ä–∞—Ç—å –Ω–∞ —Å–µ–±—è."
            ),
            "options": [
                "50 000‚ÇΩ - 80 000‚ÇΩ",
                "80 000 ‚Äì 130 000 ‚ÇΩ",
                "130 000 ‚Äì 200 000 ‚ÇΩ",
                "200 000 ‚Äì 350 000+ ‚ÇΩ",
            ],
        },
        {
            "code": "official_contract",
            "text": "–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ?",
            "type": "single_choice",
            "order": 9,
            "options": ["–ù—É–∂–µ–Ω –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä", "–°–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç—å/ –ì–ü–•", "–ù–µ–≤–∞–∂–Ω–æ"],
        },
        {
            "code": "positioning",
            "text": "–ö–û–†–û–¢–ö–û–ï –ü–û–ó–ò–¶–ò–û–ù–ò–†–û–í–ê–ù–ò–ï (–°–ê–ú–û–ï –ì–õ–ê–í–ù–û–ï)",
            "type": "text",
            "order": 10,
            "help_text": (
                "–ù–µ–º–Ω–æ–≥–æ –æ —Ç–µ–±–µ –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ ‚Äî –∫–∞–∫ –æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–µ –∏ —á–µ–ª–æ–≤–µ–∫–µ.\n"
                "–í—Å—ë, —á—Ç–æ —Å—á–∏—Ç–∞–µ—à—å –≤–∞–∂–Ω—ã–º —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å.\n\n"
                "–ü—Ä–∏–º–µ—Ä —Å–∏–ª—å–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è:\n"
                "–°–∏—Å—Ç–µ–º–Ω—ã–π –±–∏–∑–Ω–µ—Å/–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∑–∞–Ω—è—Ç–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è. –ë–µ—Ä—É –Ω–∞ —Å–µ–±—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–∫—É, "
                "–∫–æ–Ω—Ç—Ä–æ–ª—å –∑–∞–¥–∞—á, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –≤—Ä–µ–º—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞ –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏. "
                "–õ—é–±–ª—é –ø–æ—Ä—è–¥–æ–∫, —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏."
            ),
        },
        {
            "code": "files",
            "text": "–†–µ–∑—é–º–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞:",
            "type": "file",
            "order": 11,
            "help_text": (
                "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ä–µ–∑—é–º–µ - —ç—Ç–æ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —ç—Ç–∞–ø –∞–Ω–∫–µ—Ç—ã.\n"
                "–ë–µ–∑ —Ä–µ–∑—é–º–µ –º—ã –Ω–µ —Å–º–æ–∂–µ–º –ø–æ–¥–æ–±—Ä–∞—Ç—å –¥–ª—è –≤–∞—Å –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏!"
            ),
        },
    ]

    await _seed_survey(
        session,
        code=settings.ASSISTANT_MAIN_SURVEY_CODE,
        title="–ê–Ω–∫–µ—Ç–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞",
        questions_data=main_questions,
    )

    def _test_question(code: str, text: str, order: int, options: list[dict[str, str]], image_folder: str) -> dict[str, object]:
        return {
            "code": code,
            "text": text,
            "type": "single_choice",
            "order": order,
            "settings": {
                "raw_html": True,
                "image_dir": str(Path("assistant_images_questions") / image_folder),
            },
            "options": options,
        }

    test_questions = [
        _test_question(
            "q1",
            "\n".join(
                [
                    "–í–û–ü–†–û–°–´ –î–õ–Ø –ë–û–¢–ê",
                    "",
                    "–Ω—É —á—Ç–æ, let‚Äôs start —Å —Å–∞–º–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æüíî –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å:",
                    "<b>–ö–æ–≥–¥–∞ —Ç—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—à—å –∏–¥–µ–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å, —ç—Ç–æ —Å–∫–æ—Ä–µ–µ:</b>",
                    "",
                    "–í–ê–†–ò–ê–ù–¢–´ –û–¢–í–ï–¢–û–í:",
                    "AÔ∏è‚É£ –ß—ë—Ç–∫–∏–π –≥—Ä–∞—Ñ–∏–∫ üñ•",
                    "BÔ∏è‚É£ –ë—ã—Ç—å –Ω–∞ —Å–≤—è–∑–∏ ü´°",
                    "CÔ∏è‚É£ –ú–Ω–æ–≥–æ –∑–∞–¥–∞—á üìö",
                ]
            ),
            1,
            [
                {"text": "AÔ∏è‚É£ –ß—ë—Ç–∫–∏–π –≥—Ä–∞—Ñ–∏–∫ üñ•", "value": "A"},
                {"text": "BÔ∏è‚É£ –ë—ã—Ç—å –Ω–∞ —Å–≤—è–∑–∏ ü´°", "value": "B"},
                {"text": "CÔ∏è‚É£ –ú–Ω–æ–≥–æ –∑–∞–¥–∞—á üìö", "value": "C"},
            ],
            "question1",
        ),
        _test_question(
            "q2",
            "\n".join(
                [
                    "‚Äî",
                    "‚òÅÔ∏è–Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å... –∏–ª–∏ –≤—Ç–æ—Ä–æ–π –≤–æ–ø—Ä–æ—Å:",
                    "<b>–ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –Ω–µ –¥–æ –∫–æ–Ω—Ü–∞ –ø–æ–Ω—è—Ç–Ω–æ, –∞ —É—Ç–æ—á–Ω–∏—Ç—å —Å–µ–π—á–∞—Å –Ω–µ–ª—å–∑—è, —Ç—ã:</b>",
                    "",
                    "–í–ê–†–ò–ê–ù–¢–´ –û–¢–í–ï–¢–û–í:",
                    "AÔ∏è‚É£ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏üìÑ",
                    "BÔ∏è‚É£ –°–∏—Ç—É–∞—Ü–∏—è üèì",
                    "CÔ∏è‚É£ –†–µ—à–µ–Ω–∏–µ üí°",
                ]
            ),
            2,
            [
                {"text": "AÔ∏è‚É£ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏üìÑ", "value": "A"},
                {"text": "BÔ∏è‚É£ –°–∏—Ç—É–∞—Ü–∏—è üèì", "value": "B"},
                {"text": "CÔ∏è‚É£ –†–µ—à–µ–Ω–∏–µ üí°", "value": "C"},
            ],
            "question2",
        ),
        _test_question(
            "q3",
            "\n".join(
                [
                    "‚Äî",
                    "üó£—Ñ–æ—Ä–º–∞—Ç –æ–±—â–µ–Ω–∏—è. —Ç—Ä–µ—Ç–∏–π –≤–æ–ø—Ä–æ—Å:",
                    "<b>–ö–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–º —Ç–µ–±–µ –±–ª–∏–∂–µ?</b>",
                    "",
                    "–í–ê–†–ò–ê–ù–¢–´ –û–¢–í–ï–¢–û–í:",
                    "AÔ∏è‚É£ –î–∏—Å—Ç–∞–Ω—Ü–∏—è üë•",
                    "BÔ∏è‚É£ –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Å–≤—è–∑—å ü´Ç",
                    "CÔ∏è‚É£ –†–∞–±–æ—á–µ–µ –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ üíº",
                ]
            ),
            3,
            [
                {"text": "AÔ∏è‚É£ –î–∏—Å—Ç–∞–Ω—Ü–∏—è üë•", "value": "A"},
                {"text": "BÔ∏è‚É£ –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Å–≤—è–∑—å ü´Ç", "value": "B"},
                {"text": "CÔ∏è‚É£ –†–∞–±–æ—á–µ–µ –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ üíº", "value": "C"},
            ],
            "question3",
        ),
        _test_question(
            "q4",
            "\n".join(
                [
                    "‚Äî",
                    "ü§Ø—Ö–∞–æ—Å –∏ —Å—Ç—Ä–µ—Å—Å. —á–µ—Ç–≤–µ—Ä—Ç—ã–π –≤–æ–ø—Ä–æ—Å:",
                    "<b>–ö–æ–≥–¥–∞ –≤–æ–∫—Ä—É–≥ –º–Ω–æ–≥–æ –∑–∞–¥–∞—á –∏ –≤—Å—ë —Å—Ä–æ—á–Ω–æ, —Ç—ã:</b>",
                    "",
                    "–í–ê–†–ò–ê–ù–¢–´ –û–¢–í–ï–¢–û–í:",
                    "AÔ∏è‚É£ –¢–µ—Ä—è–µ—à—å—Å—è üò±",
                    "BÔ∏è‚É£ –§–æ–∫—É—Å–∏—Ä—É–µ—à—å—Å—è üß†",
                    "CÔ∏è‚É£ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã ‚úçÔ∏è",
                ]
            ),
            4,
            [
                {"text": "AÔ∏è‚É£ –¢–µ—Ä—è–µ—à—å—Å—è üò±", "value": "A"},
                {"text": "BÔ∏è‚É£ –§–æ–∫—É—Å–∏—Ä—É–µ—à—å—Å—è üß†", "value": "B"},
                {"text": "CÔ∏è‚É£ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã ‚úçÔ∏è", "value": "C"},
            ],
            "question4",
        ),
        _test_question(
            "q5",
            "\n".join(
                [
                    "‚Äî",
                    "–¢–∏–ø –∑–∞–¥–∞—á ü§≥–ø—è—Ç—ã–π –≤–æ–ø—Ä–æ—Å:",
                    "<b>–ö–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ —Ç–µ–±–µ –¥–∞—é—Ç—Å—è –ª–µ–≥—á–µ –≤—Å–µ–≥–æ?</b>",
                    "",
                    "–í–ê–†–ò–ê–ù–¢–´ –û–¢–í–ï–¢–û–í:",
                    "AÔ∏è‚É£ –î–æ–∫—É–º–µ–Ω—Ç—ã, —Å–ø–∏—Å–∫–∏, –∫–æ–Ω—Ç—Ä–æ–ª—å, –ø–æ—Ä—è–¥–æ–∫ üìë",
                    "BÔ∏è‚É£ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è, –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ üìå",
                    "CÔ∏è‚É£ –ö–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ üëÄ",
                ]
            ),
            5,
            [
                {"text": "AÔ∏è‚É£ –î–æ–∫—É–º–µ–Ω—Ç—ã, —Å–ø–∏—Å–∫–∏, –∫–æ–Ω—Ç—Ä–æ–ª—å, –ø–æ—Ä—è–¥–æ–∫ üìë", "value": "A"},
                {"text": "BÔ∏è‚É£ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è, –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ üìå", "value": "B"},
                {"text": "CÔ∏è‚É£ –ö–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ üëÄ", "value": "C"},
            ],
            "question5",
        ),
        _test_question(
            "q6",
            "\n".join(
                [
                    "‚Äî",
                    "üí™–ú–æ—Ç–∏–≤–∞—Ü–∏—è. —à–µ—Å—Ç–æ–π –≤–æ–ø—Ä–æ—Å:",
                    "<b>–ß—Ç–æ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç —Ç–µ–±—è –≤ —Ä–∞–±–æ—Ç–µ?</b>",
                    "",
                    "–í–ê–†–ò–ê–ù–¢–´ –û–¢–í–ï–¢–û–í:",
                    "AÔ∏è‚É£ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–Ω—è—Ç–Ω–æ—Å—Ç—åüëÅ",
                    "BÔ∏è‚É£ –ß—É–≤—Å—Ç–≤–æ –Ω—É–∂–Ω–æ—Å—Ç–∏ üë´",
                    "CÔ∏è‚É£ –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ —Ä–æ—Å—Çüìà",
                ]
            ),
            6,
            [
                {"text": "AÔ∏è‚É£ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–Ω—è—Ç–Ω–æ—Å—Ç—åüëÅ", "value": "A"},
                {"text": "BÔ∏è‚É£ –ß—É–≤—Å—Ç–≤–æ –Ω—É–∂–Ω–æ—Å—Ç–∏ üë´", "value": "B"},
                {"text": "CÔ∏è‚É£ –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ —Ä–æ—Å—Çüìà", "value": "C"},
            ],
            "question6",
        ),
        _test_question(
            "q7",
            "\n".join(
                [
                    "‚Äî",
                    "–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å ü§ù—Å–µ–¥—å–º–æ–π –≤–æ–ø—Ä–æ—Å:",
                    "(–æ—Å—Ç–∞–ª–æ—Å—å –µ—â–µ –Ω–µ–º–Ω–æ–≥–æ)",
                    "<b>–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, —Ç—ã —Å–∫–æ—Ä–µ–µ:</b>",
                    "",
                    "–í–ê–†–ò–ê–ù–¢–´ –û–¢–í–ï–¢–û–í:",
                    "AÔ∏è‚É£ –•–æ—á–µ—à—å –ø–æ–Ω—è—Ç—å, –≥–¥–µ –±—ã–ª–∞ –æ—à–∏–±–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–µ",
                    "BÔ∏è‚É£ –ü–µ—Ä–µ–∂–∏–≤–∞–µ—à—å –∑–∞ —á–µ–ª–æ–≤–µ–∫–∞ –∏ —Å—Ç–∞—Ä–∞–µ—à—å—Å—è —Å–≥–ª–∞–¥–∏—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é",
                    "CÔ∏è‚É£ –ë—ã—Å—Ç—Ä–æ –∏—â–µ—à—å —Ä–µ—à–µ–Ω–∏–µ –∏ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—à—å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è",
                ]
            ),
            7,
            [
                {"text": "AÔ∏è‚É£ –•–æ—á–µ—à—å –ø–æ–Ω—è—Ç—å, –≥–¥–µ –±—ã–ª–∞ –æ—à–∏–±–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–µ", "value": "A"},
                {"text": "BÔ∏è‚É£ –ü–µ—Ä–µ–∂–∏–≤–∞–µ—à—å –∑–∞ —á–µ–ª–æ–≤–µ–∫–∞ –∏ —Å—Ç–∞—Ä–∞–µ—à—å—Å—è —Å–≥–ª–∞–¥–∏—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é", "value": "B"},
                {"text": "CÔ∏è‚É£ –ë—ã—Å—Ç—Ä–æ –∏—â–µ—à—å —Ä–µ—à–µ–Ω–∏–µ –∏ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—à—å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è", "value": "C"},
            ],
            "question7",
        ),
        _test_question(
            "q8",
            "\n".join(
                [
                    "‚Äî",
                    "–ü—Ä–æ —ç–Ω–µ—Ä–≥–∏—é üå± (–∫–ª—é—á–µ–≤–æ–π) –≤–æ–ø—Ä–æ—Å:",
                    "<b>–ü–æ—Å–ª–µ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–±—è –ª—É—á—à–µ, –µ—Å–ª–∏:</b>",
                    "",
                    "–í–ê–†–ò–ê–ù–¢–´ –û–¢–í–ï–¢–û–í:",
                    "AÔ∏è‚É£ –í—Å—ë —Å–¥–µ–ª–∞–Ω–æ –ø–æ –ø–ª–∞–Ω—É –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–±—ã—Ç–æü§î",
                    "BÔ∏è‚É£ –¢—ã –±—ã–ª–∞ –ø–æ–ª–µ–∑–Ω–æ–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–ª–∞ –¥—Ä—É–≥–æ–≥–æü•∞",
                    "CÔ∏è‚É£ –¢—ã –ø—Ä–æ–¥–≤–∏–Ω—É–ª–∞ –ø—Ä–æ—Ü–µ—Å—Å –∏ —Ä–µ—à–∏–ª–∞ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏üò∞",
                ]
            ),
            8,
            [
                {"text": "AÔ∏è‚É£ –í—Å—ë —Å–¥–µ–ª–∞–Ω–æ –ø–æ –ø–ª–∞–Ω—É –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–±—ã—Ç–æü§î", "value": "A"},
                {"text": "BÔ∏è‚É£ –¢—ã –±—ã–ª–∞ –ø–æ–ª–µ–∑–Ω–æ–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–ª–∞ –¥—Ä—É–≥–æ–≥–æü•∞", "value": "B"},
                {"text": "CÔ∏è‚É£ –¢—ã –ø—Ä–æ–¥–≤–∏–Ω—É–ª–∞ –ø—Ä–æ—Ü–µ—Å—Å –∏ —Ä–µ—à–∏–ª–∞ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏üò∞", "value": "C"},
            ],
            "question8",
        ),
    ]

    await _seed_survey(
        session,
        code=settings.ASSISTANT_TEST_SURVEY_CODE,
        title="–¢–µ—Å—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞",
        questions_data=test_questions,
    )
